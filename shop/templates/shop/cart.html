{% extends 'shop/base.html' %}
{% load static %}

{% block title %}–ö–æ—Ä–∑–∏–Ω–∞ ‚Äî –ü–∞—Å–µ–∫–∞ –ë–∞–±–ª–∞{% endblock %}

{% block content %}
<div class="container py-5">
  <h2 class="text-center mb-4 fw-bold text-honey">üõí –í–∞—à–∞ –∫–æ—Ä–∑–∏–Ω–æ—á–∫–∞</h2>

  {% if cart %}
    <div class="table-responsive">
      <table class="table table-hover align-middle shadow-sm">
        <thead class="table-light">
          <tr>
            <th>–¢–æ–≤–∞—Ä</th>
            <th class="text-center">–¶–µ–Ω–∞</th>
            <th class="text-center">–ö–æ–ª-–≤–æ</th>
            <th class="text-center">–°—É–º–º–∞</th>
            <th></th>
          </tr>
        </thead>
        <tbody>
          {% for item in cart %}
            <tr>
              <td>
                <div class="d-flex align-items-center gap-3">
                  {% if item.product.image %}
                    <img src="{{ item.product.image.url }}" alt="{{ item.product.name }}" class="rounded" style="width: 80px; height: 80px; object-fit: cover;">
                  {% endif %}
                  <div>
                    <strong>{{ item.product.name }}</strong><br>
                    <small class="text-muted">{{ item.product.category }}</small>
                  </div>
                </div>
              </td>
              <td class="text-center">{{ item.product.price }} ‚ÇΩ</td>
              <td class="text-center">{{ item.quantity }}</td>
              <td class="text-center fw-bold">{{ item.total_price }} ‚ÇΩ</td>
              <td class="text-end">
                <a href="{% url 'remove_from_cart' item.product.id %}" class="btn btn-sm btn-outline-danger">‚úï</a>
              </td>
            </tr>
          {% endfor %}
        </tbody>
      </table>
    </div>

    <div class="text-end mt-4">
      <h5 class="fw-bold">–ò—Ç–æ–≥–æ: {{ cart.get_total_price }} ‚ÇΩ</h5>
      <a href="#" class="btn btn-honey-light mt-2">–û—Ñ–æ—Ä–º–∏—Ç—å –∑–∞–∫–∞–∑</a>
    </div>

  {% else %}
    <p class="text-center fs-5">–ö–æ—Ä–∑–∏–Ω–∞ –ø–æ–∫–∞ –ø—É—Å—Ç–∞. –ù–æ —ç—Ç–æ –ª–µ–≥–∫–æ –∏—Å–ø—Ä–∞–≤–∏—Ç—å üçØ</p>
    <div class="text-center">
      <a href="{% url 'index' %}" class="btn btn-outline-honey mt-3">–ü–µ—Ä–µ–π—Ç–∏ –∫ –ø–æ–∫—É–ø–∫–∞–º</a>
    </div>
  {% endif %}
</div>
{% endblock %}